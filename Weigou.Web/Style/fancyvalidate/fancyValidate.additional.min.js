/*! Fancy Validate Additional v0.1.4 | Copyright 2013 cormin.lu@gmail.com | MIT Licensed | Build 09/22/2013 */
(function(e){function c(e,t,i){function u(){e.value&&n.addClass(s,"w-hide")}if(!(this instanceof c))return new c(e,t);var s=document.createElement("span");if(i){var o=document.createElement("span");e.parentNode.insertBefore(o,e),o.appendChild(s),o.appendChild(e),n.addClass(o,"w-wrapper")}else e.parentNode.insertBefore(s,e);n.addClass(s,"w-label"),s.innerHTML=t,s.style.height=s.style.lineHeight=e.offsetHeight+"px",u(),r.add(e,"focusin",function(){u(),e.value||n.addClass(s,"w-active")}),r.add(e,"focusout",function(){e.value||n.removeClass(s,"w-active w-hide")}),r.add(e,"keyup",u),r.add(s,"click",function(){u(),n.focus(e)})}var t=e.core,n=e.dom,r=e.event,i={email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,url:/^(http|https|ftp)\:\/\/[a-z\d\-\.]+\.[a-z]{2,3}(:[a-z\d]*)?\/?([a-z\d\-\._\?\,\'\/\\\+&amp;%\$#\=~])*$/i,rfc3896url:new RegExp("^(?:([^:/?#]+):)?(?://(?:([^/?#]*)@)?([^/?#:@]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"),ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,date:/^(19|20)\d\d([- /.])(0[1-9]|1[012])\2(0[1-9]|[12][0-9]|3[01])(?: ([01]\d|2[0-3])(:[0-5]\d){0,2})?$/,date2:/^(19|20)\d\d([- /.])(0?[1-9]|1[012])\2(0?[1-9]|[12][0-9]|3[01])(?: ([01]?\d|2[0-3])(:[0-5]?\d){0,2})?$/,time:/^([01]\d|2[0-3])(:[0-5]\d){0,2}$/,zipcode:/^\d{6}$/,compressed:/.+\.(7z|zip|rar|tar|taz|tgz|gz|gzip)$/i,picture:/.+\.(jpe?g|bmp|png|gif|ico|pcx|tif|raw|tga)$/i,chinese:/^[\u0391-\uFFE5\u4e00-\u9fa5]+$/,phone:/^([(]?0\d{2,3}[)]?[-]?)?\s?\d{4}\-?\d{4}(-\d+)?$/,mobile:/^(1[3458])\d{9}$/},s={email:"\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740",url:"\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684\u7684URL\u5730\u5740",ipv4:"\u8bf7\u8f93\u5165\u6709\u6548\u7684ip\u5730\u5740",date:"\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684\u65e5\u671f",date2:"\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684\u65e5\u671f",time:"\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684\u65f6\u95f4",zipcode:"\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684\u90ae\u7f16",compressed:"\u8bf7\u9009\u62e9\u4e00\u4e2a\u6709\u6548\u7684\u538b\u7f29\u6587\u4ef6",picture:"\u8bf7\u9009\u62e9\u4e00\u4e2a\u6709\u6548\u7684\u56fe\u7247\u6587\u4ef6",chinese:"\u8bf7\u8f93\u5165\u4e2d\u6587",phone:"\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684\u7535\u8bdd\u53f7\u7801",mobile:"\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684\u624b\u673a\u53f7\u7801"},o={11:"\u5317\u4eac",12:"\u5929\u6d25",13:"\u6cb3\u5317",14:"\u5c71\u897f",15:"\u5185\u8499\u53e4",21:"\u8fbd\u5b81",22:"\u5409\u6797",23:"\u9ed1\u9f99\u6c5f",31:"\u4e0a\u6d77",32:"\u6c5f\u82cf",33:"\u6d59\u6c5f",34:"\u5b89\u5fbd",35:"\u798f\u5efa",36:"\u6c5f\u897f",37:"\u5c71\u4e1c",41:"\u6cb3\u5357",42:"\u6e56\u5317",43:"\u6e56\u5357",44:"\u5e7f\u4e1c",45:"\u5e7f\u897f",46:"\u6d77\u5357",50:"\u91cd\u5e86",51:"\u56db\u5ddd",52:"\u8d35\u5dde",53:"\u4e91\u5357",54:"\u897f\u85cf",61:"\u9655\u897f",62:"\u7518\u8083",63:"\u9752\u6d77",64:"\u5b81\u590f",65:"\u65b0\u7586",71:"\u53f0\u6e7e",81:"\u9999\u6e2f",82:"\u6fb3\u95e8",91:"\u56fd\u5916"},u=function(e){var t,n=0;if(!/^\d{17}(\d|x)$/i.test(e))return"\u4f60\u8f93\u5165\u7684\u8eab\u4efd\u8bc1\u957f\u5ea6\u6216\u683c\u5f0f\u9519\u8bef";e=e.replace(/x$/i,"a");if(!o[parseInt(e.substr(0,2))])return"\u4f60\u7684\u8eab\u4efd\u8bc1\u5730\u533a\u975e\u6cd5";sBirthday=e.substr(6,4)+"-"+Number(e.substr(10,2))+"-"+Number(e.substr(12,2)),t=new Date(sBirthday.replace(/-/g,"/"));if(sBirthday!=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate())return"\u8eab\u4efd\u8bc1\u4e0a\u7684\u51fa\u751f\u65e5\u671f\u975e\u6cd5";for(var r=17;r>=0;r--)n+=Math.pow(2,r)%11*parseInt(e.charAt(17-r),11);return n%11!=1?"\u4f60\u8f93\u5165\u7684\u8eab\u4efd\u8bc1\u53f7\u975e\u6cd5":!0};e.addMethod("idcard",function(e,t){return this.optional(t)||u(e)===!0},"\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684\u8eab\u4efd\u8bc1\u53f7\u7801"),t.each(i,function(t,n){e.addPattern(n,t,s[n])});var a=t.ajax=function(e){this.url=e,this.xhr=a.create()};t.extend(a,{create:function(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)return new ActiveXObject("Microsoft.XMLHTTP");t.error("XMLHTTP object could be created.")},param:function(e){var n=[];if(t.isArray(e))t.each(e,function(){n.push(encodeURIComponent(this.name)+"="+encodeURIComponent(this.value))});else for(var r in e)t.isArray(e[r])?t.each(e[r],function(){n.push(encodeURIComponent(r)+"="+encodeURIComponent(this))}):n.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return n.join("&").replace(/%20/g,"+")},prototype:{request:function(e){var t,n=this.url,r=this.xhr,i=e.method||"POST";this.isrun&&(this.isrun=!1,r.abort()),this.isrun=!0,r.onreadystatechange=function(){r.readyState==4&&e.callback(r.responseText,r.status,r)};try{t=a.param(e.data),r.open(i,n,!0),r.setRequestHeader("Content-Length",t.length),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send(t)}catch(s){e.callback&&e.callback(r.responseText,r.status,r,s)}finally{this.isrun=!1}},abort:function(){this.xhr&&this.xhr.abort()}}});var f={ing:"\u6b63\u5728\u8bf7\u6c42...",failed:"\u9a8c\u8bc1\u5931\u8d25",error:"\u8bf7\u6c42\u5931\u8d25"},l=function(e){return e==1};e.addMethod("ajax",function(e,n,r){if(this.optional(n)&&!e)return!0;var i=this,s=this.attr(n),o=this.getKey(n),u=this.settings.messages[o],c=t.isString(r)?r:r.url,h=r.callback||l,p={};return u||(u=this.settings.messages[o]={}),s.ajax||(s.ajax=new a(c),s.ajaxMessage=u.ajax),u.ajax=f.ing,p[!t.isString(r)&&r.key||o]=e,s.ajax.request({data:p,callback:function(e,t,r,o){var a=t==200&&h(e),l=(u.ajax=t==200?s.ajaxMessage:f.error)||f.failed;i.addResult(a,n,l),i.hideErrors(),i.showErrors()}}),this.optional(n)||!1},f.ing),t.extend(!0,e,{watermark:c,getKeyForAspnet:function(n){if(!n.name)return;if(t.inArray("__EVENTTARGET __EVENTARGUMENT __VIEWSTATE __EVENTVALIDATION".split(" "),n.name)>-1)return;var r=n.name.split("$"),i=r.length,s;return i===1?r[0]:(s=r[i-1],e.core.isDigit(s)?r[i-2]:s)},placeHolder:function(e){var r,i="placeholder"in document.createElement("input");i||t.each(e,function(e){r=n.attr(e,"placeholder"),r&&c(e,r)})},bubbleTip:function(t,r){n.addClass(t,"b-b e-bubble"),e.appendContainer.call(this,t,r),t.innerHTML='<span class="b-cor b-cor10 e-b-bot"></span><span class="b-cor b-cor10 e-b-top"></span><p class="b-con"></p>',t.textNode=t.childNodes[2],t.vtarget=r},arrowTip:function(t,r){n.addClass(t,"b-b e-arrow"),e.appendContainer.call(this,t,r),t.innerHTML='<span class="b-cor b-cor15"></span><p class="b-con"></p>',t.textNode=t.childNodes[1],t.vtarget=r},tipText:function(t,n){t.textNode.innerHTML=n,e.appendContainer.call(this,t,t.vtarget)},prototype:{placeHolder:function(){e.placeHolder(this.elements())}}})})(window.fancy);